-- MySQL Script generated by MySQL Workbench
-- Tue Mar 30 18:40:35 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema george-hollywood
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema george-hollywood
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `george-hollywood` DEFAULT CHARACTER SET UTF8MB4 COLLATE utf8mb4_0900_ai_ci ;
USE `george-hollywood` ;

-- -----------------------------------------------------
-- Table `george-hollywood`.`login`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`login` (
  `loginID` INT NOT NULL,
  `email` VARCHAR(100) NOT NULL,
  `password` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`loginID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`user`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`user` (
  `UserID` INT NOT NULL,
  `firstname` VARCHAR(50) NOT NULL,
  `familyname` VARCHAR(50) NOT NULL,
  `address` VARCHAR(50) NOT NULL,
  `zipcodeID` VARCHAR(7) NOT NULL,
  `city` VARCHAR(50) NOT NULL,
  `loginID` INT NOT NULL,
  PRIMARY KEY (`UserID`),
  INDEX `FK_User_Login_idx` (`loginID` ASC) VISIBLE,
  CONSTRAINT `FK_User_Login`
    FOREIGN KEY (`loginID`)
    REFERENCES `george-hollywood`.`login` (`loginID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`category`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`category` (
  `categoryID` INT NOT NULL,
  `name` VARCHAR(20) NOT NULL,
  `description` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`categoryID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`dishtype`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`dishtype` (
  `dishID` INT NOT NULL,
  `dishname` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`dishID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`option`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`option` (
  `optionID` INT NOT NULL,
  `name` VARCHAR(20) NOT NULL,
  `description` VARCHAR(100) NULL,
  `content` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`optionID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`product`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`product` (
  `productID` INT NOT NULL,
  `name` VARCHAR(20) NOT NULL,
  `description` VARCHAR(100) NOT NULL,
  `allergies` VARCHAR(50) NOT NULL,
  `price` FLOAT NOT NULL,
  `categoryID` INT NOT NULL,
  `dishID` INT NOT NULL,
  `optionID` INT NOT NULL,
  PRIMARY KEY (`productID`),
  INDEX `FK_Product_Category_idx` (`categoryID` ASC) VISIBLE,
  INDEX `FK_Product_DishType_idx` (`dishID` ASC) VISIBLE,
  INDEX `FK_Product_Option_idx` (`optionID` ASC) VISIBLE,
  CONSTRAINT `FK_Product_Category`
    FOREIGN KEY (`categoryID`)
    REFERENCES `george-hollywood`.`category` (`categoryID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_Product_DishType`
    FOREIGN KEY (`dishID`)
    REFERENCES `george-hollywood`.`dishtype` (`dishID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_Product_Option`
    FOREIGN KEY (`optionID`)
    REFERENCES `george-hollywood`.`option` (`optionID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`tax`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`tax` (
  `taxID` INT NOT NULL,
  `taxrate` FLOAT NOT NULL,
  PRIMARY KEY (`taxID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`shipping`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`shipping` (
  `shippingID` INT NOT NULL,
  `costs` FLOAT NOT NULL,
  PRIMARY KEY (`shippingID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`order`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`order` (
  `orderID` INT NOT NULL,
  `userID` INT NOT NULL,
  `taxID` INT NOT NULL,
  `shippingID` INT NOT NULL,
  `date` DATETIME NOT NULL,
  `totalprice` FLOAT NOT NULL,
  PRIMARY KEY (`orderID`),
  INDEX `FK_Order_User_idx` (`userID` ASC) VISIBLE,
  INDEX `FK_Order_Tax_idx` (`taxID` ASC) VISIBLE,
  INDEX `FK_Order_Shipping_idx` (`shippingID` ASC) VISIBLE,
  CONSTRAINT `FK_Order_User`
    FOREIGN KEY (`userID`)
    REFERENCES `george-hollywood`.`user` (`UserID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_Order_Tax`
    FOREIGN KEY (`taxID`)
    REFERENCES `george-hollywood`.`tax` (`taxID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_Order_Shipping`
    FOREIGN KEY (`shippingID`)
    REFERENCES `george-hollywood`.`shipping` (`shippingID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`orderrow`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`orderrow` (
  `orderID` INT NOT NULL,
  `productID` INT NOT NULL,
  `optionID` INT NOT NULL,
  `amount` INT NOT NULL,
  PRIMARY KEY (`orderID`, `productID`, `optionID`),
  INDEX `FK_OrderRow_Product_idx` (`productID` ASC) VISIBLE,
  CONSTRAINT `FK_OrderRow_Product`
    FOREIGN KEY (`productID`)
    REFERENCES `george-hollywood`.`product` (`productID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_OrderRow_Order`
    FOREIGN KEY (`orderID`)
    REFERENCES `george-hollywood`.`order` (`orderID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`userrole`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`userrole` (
  `roleID` INT NOT NULL,
  `role` VARCHAR(20) NOT NULL,
  `roledescription` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`roleID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`shoppingcart`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`shoppingcart` (
  `cartID` INT NOT NULL,
  `userID` INT NOT NULL,
  PRIMARY KEY (`cartID`),
  INDEX `FK_ShoppingCart_User_idx` (`userID` ASC) VISIBLE,
  CONSTRAINT `FK_ShoppingCart_User`
    FOREIGN KEY (`userID`)
    REFERENCES `george-hollywood`.`user` (`UserID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`cartrow`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`cartrow` (
  `cartID` INT NOT NULL,
  `productID` INT NOT NULL,
  `amount` INT NOT NULL,
  PRIMARY KEY (`cartID`, `productID`),
  INDEX `FK_CartRow_Product_idx` (`productID` ASC) VISIBLE,
  CONSTRAINT `FK_CartRow_ShoppingCart`
    FOREIGN KEY (`cartID`)
    REFERENCES `george-hollywood`.`shoppingcart` (`cartID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_CartRow_Product`
    FOREIGN KEY (`productID`)
    REFERENCES `george-hollywood`.`product` (`productID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `george-hollywood`.`userrolerow`
-- -----------------------------------------------------

CREATE TABLE IF NOT EXISTS `george-hollywood`.`userrolerow` (
  `roleID` INT NOT NULL,
  `userID` INT NOT NULL,
  PRIMARY KEY (`roleID`, `userID`),
  INDEX `FK_UserRoleRow_User_idx` (`userID` ASC) VISIBLE,
  CONSTRAINT `FK_UserRoleRow_User`
    FOREIGN KEY (`userID`)
    REFERENCES `george-hollywood`.`user` (`UserID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_UserRoleRow_UserRole`
    FOREIGN KEY (`roleID`)
    REFERENCES `george-hollywood`.`userrole` (`roleID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
